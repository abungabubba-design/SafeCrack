<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SafeCrack Game</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

    body {
      font-family: 'Orbitron', sans-serif;
      margin: 0;
      color: #111;
      text-align:center;
      overflow:hidden;
    }

    .game-container {
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      height:100vh;
      padding:10px;
    }

    .game-header h1 { font-size:2.8em; color:#fff; text-shadow:0 0 10px #fff,0 0 20px #ff6ec7; margin-bottom:10px; }
    #credit { font-size:0.9em; margin-bottom:30px; color:#333; }

    .scoreboard { display:flex; justify-content:space-around; width:70%; margin-bottom:20px; }
    #score, #highScore, #points { font-size:1.2em; color:#fff; text-shadow:0 0 10px #00f0ff,0 0 20px #ff6ec7; }

    .riddle-area {
      width:75%;
      background: rgba(255,255,255,0.15);
      border:2px solid #fff;
      border-radius:20px;
      padding:30px;
      box-shadow:0 0 25px rgba(255,255,255,0.6);
      backdrop-filter: blur(8px);
    }

    .riddle-text { font-size:1.5em; margin-bottom:20px; color:#111; text-shadow:0 0 8px #fff; }

    #answer { padding:12px; width:70%; font-size:1em; border-radius:15px; border:2px solid #fff; outline:none; background:rgba(255,255,255,0.25); color:#111; }

    button { margin-top:15px; padding:12px 30px; font-size:1.1em; border:none; border-radius:15px; font-weight:bold; cursor:pointer; transition:0.3s; box-shadow:0 0 10px #fff,0 0 20px #ff6ec7; }
    #submit { background:#00f0ff; color:#111; }
    #submit:hover { background:#ff6ec7; color:#fff; transform:scale(1.05);}
    #shopButton { background:#ff6ec7; color:#fff; }
    #shopButton:hover { background:#00f0ff; color:#111; transform:scale(1.05); }

    .message { font-size:1.2em; margin-top:15px; min-height:30px; color:#fff; text-shadow:0 0 8px #fff,0 0 15px #ff6ec7; }

    .safe-container { position:absolute; top:50%; right:10%; transform:translateY(-50%); }
    .safe-icon { width:130px; transition:0.3s; filter:drop-shadow(0 0 20px #ff6ec7); }
    .safe-icon.glow { animation: glowPulse 0.8s ease infinite; }
    .safe-icon.shake { animation: shakeAnim 0.6s ease; }

    #homeButton { position:absolute; bottom:30px; left:30px; padding:12px 25px; background:#ff6ec7; color:#fff; font-weight:bold; border:none; border-radius:15px; cursor:pointer; box-shadow:0 0 10px #fff,0 0 20px #00f0ff; }
    #homeButton:hover { background:#00f0ff; color:#111; transform:scale(1.05); }

    @keyframes shakeAnim {0%{transform:rotate(0deg);}25%{transform:rotate(5deg);}50%{transform:rotate(-5deg);}75%{transform:rotate(4deg);}100%{transform:rotate(0deg);} }
    @keyframes glowPulse {0%{filter:drop-shadow(0 0 15px #fff);}50%{filter:drop-shadow(0 0 35px #ff6ec7);}100%{filter:drop-shadow(0 0 15px #fff);} }
    @keyframes fadeIn { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }
    @keyframes gradientBG {0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
  </style>
</head>
<body>
  <div class="game-container">
    <header class="game-header">
      <h1>üîê SafeCrack</h1>
      <p id="credit">Made by Justin Akande</p>
    </header>

    <section class="scoreboard">
      <p id="score">Score: 0</p>
      <p id="highScore">High Score: 0</p>
      <p id="points">Points: 0</p>
    </section>

    <main class="riddle-area">
      <p id="riddle" class="riddle-text">Press submit to start your mission...</p>
      <input type="text" id="answer" placeholder="Type your answer..." autocomplete="off" />
      <button id="submit">Submit</button>
      <button id="shopButton">üõí Shop</button>
    </main>

    <p id="message" class="message"></p>

    <div class="safe-container">
      <img id="safe" src="images/safe1.png" alt="Mini Safe" class="safe-icon" />
    </div>

    <footer>
      <button id="homeButton">üè† Home</button>
    </footer>
  </div>

  <script>
    // MODE THEME
    const mode = localStorage.getItem("mode") || "classic";
    const body = document.body;
    if(mode === "classic"){
      body.style.background = "linear-gradient(135deg,#ffecd2,#fcb69f)";
      body.style.color = "#111";
    } else {
      body.style.background = "linear-gradient(135deg,#0f0c29,#302b63,#24243e)";
      body.style.color = "#0ff";
    }

    // GAME LOGIC
    let riddles = [
      {question:"What has to be broken before you can use it?",answer:"egg"},
      {question:"What goes up but never comes down?",answer:"age"},
      {question:"I‚Äôm tall when I‚Äôm young and short when I‚Äôm old. What am I?",answer:"candle"},
      {question:"What month has 28 days?",answer:"all of them"},
      {question:"What is full of holes but holds water?",answer:"sponge"},
      {question:"What gets wetter the more it dries?",answer:"towel"},
      {question:"I‚Äôm always running but never get tired or hot. What am I?",answer:"river"},
      {question:"What has hands but can‚Äôt clap?",answer:"clock"}
    ];

    let currentRiddle, usedRiddles=[], score=0;
    let highScore = localStorage.getItem("highScore")?parseInt(localStorage.getItem("highScore")):0;
    let points = localStorage.getItem("points")?parseInt(localStorage.getItem("points")):0;
    let streak=0, difficulty=1;

    const riddleElement = document.getElementById("riddle");
    const answerInput = document.getElementById("answer");
    const submitBtn = document.getElementById("submit");
    const scoreElement = document.getElementById("score");
    const highScoreElement = document.getElementById("highScore");
    const pointsElement = document.getElementById("points");
    const messageElement = document.getElementById("message");
    const homeBtn = document.getElementById("homeButton");
    const safeImg = document.getElementById("safe");

    function generateRiddle(){
      if(usedRiddles.length===riddles.length) usedRiddles=[];
      let index;
      do{ index=Math.floor(Math.random()*riddles.length); }
      while(usedRiddles.includes(index));
      usedRiddles.push(index);
      currentRiddle = riddles[index];
      riddleElement.textContent = currentRiddle.question;
    }

    function startGame(){ score=0; streak=0; difficulty=1; updateDisplay(); messageElement.textContent=""; generateRiddle(); }

    function checkAnswer(){
      const userAnswer = answerInput.value.trim().toLowerCase();
      if(userAnswer === currentRiddle.answer.toLowerCase()){
        score += Math.floor(10*difficulty);
        streak++; difficulty+=0.15; points+=5;
        messageElement.textContent="üî• Correct!"; animateSafe(true);
        if(streak%5===0){ points+=50; messageElement.textContent="üíé 5-Correct Streak! Bonus Points!"; }
      } else {
        messageElement.textContent=`‚ùå Wrong! Correct: "${currentRiddle.answer}"`; streak=0; animateSafe(false);
      }
      updateHighScore(); updateDisplay();
      answerInput.value=""; generateRiddle();
    }

    function updateHighScore(){ if(score>highScore){ highScore=score; localStorage.setItem("highScore",highScore); } }
    function updateDisplay(){ scoreElement.textContent=`Score: ${score}`; highScoreElement.textContent=`High Score: ${highScore}`; pointsElement.textContent=`Points: ${points}`; localStorage.setItem("points",points); }
    function goHome(){ window.location.href="index.html"; }

    function animateSafe(success){ safeImg.classList.remove("shake","glow"); void safeImg.offsetWidth; safeImg.classList.add(success?"glow":"shake"); }

    submitBtn.addEventListener("click",checkAnswer);
    answerInput.addEventListener("keypress",(e)=>{if(e.key==="Enter") checkAnswer();});
    homeBtn.addEventListener("click",goHome);
    document.getElementById("shopButton").addEventListener("click",()=>{window.location.href="shop.html";});

    window.onload = () => { safeImg.src=localStorage.getItem("currentSafe")||"images/safe1.png"; updateDisplay(); startGame(); };
  </script>
</body>
</html>
